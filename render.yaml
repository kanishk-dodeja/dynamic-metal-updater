services:
  - type: web
    name: dynamic-metal-updater
    env: docker
    plan: free
    healthCheckPath: /api/debug/health
    dockerCommand: npm start
    envVars:
      - key: SHOPIFY_API_KEY
        description: Shopify App API Key
        sync: false
      - key: SHOPIFY_API_SECRET
        description: Shopify App API Secret
        sync: false
      - key: SHOPIFY_APP_URL
        description: The public URL of your app (https://...)
        sync: false
      - key: SCOPES
        description: Required Shopify API scopes
        value: "write_products,read_products"
      - key: DATABASE_URL
        description: Supabase PostgreSQL Connection String
        sync: false
      - key: METALS_DEV_API_KEY
        description: API Key from Metals.Dev (metals.dev)
        sync: false
      - key: GOLD_API_KEY
        description: Legacy fallback, optional
        sync: false
      - key: ENCRYPTION_KEY
        description: 64-char hex key for AES-256 encryption
        sync: false
      - key: NODE_ENV
        value: "production"
      - key: NODE_VERSION
        value: "20"
